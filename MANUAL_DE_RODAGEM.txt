================================================================================
                    üåç MANUAL DE EXECU√á√ÉO - ECOSIGHT
                 Sistema de Monitoramento Ambiental Urbano
================================================================================

Este manual vai te guiar passo a passo para rodar o projeto EcoSight na sua m√°quina.

================================================================================
üìã O QUE VOC√ä VAI PRECISAR INSTALAR
================================================================================

BACKEND (API Python)
--------------------
1. Python 3.12 ou superior
   ‚Üí Baixe em: https://www.python.org/downloads/
   ‚Üí No Windows, marque "Add Python to PATH" durante a instala√ß√£o
   ‚Üí Teste no terminal: python --version

2. Poetry (gerenciador de pacotes Python)
   ‚Üí Abra o terminal e rode: pip install poetry
   ‚Üí Teste: poetry --version

3. PostgreSQL 16 ou superior
   ‚Üí Baixe em: https://www.postgresql.org/download/
   ‚Üí Durante a instala√ß√£o, escolha uma senha que voc√™ vai lembrar
   ‚Üí Anote a porta (normalmente √© 5432)

FRONTEND (Aplicativo Flutter)
------------------------------
1. Flutter SDK 3.9.2 ou superior
   ‚Üí Siga o guia completo: https://docs.flutter.dev/get-started/install
   ‚Üí Escolha seu sistema operacional e siga as instru√ß√µes
   ‚Üí Teste: flutter --version

2. Git (para controle de vers√£o)
   ‚Üí Baixe em: https://git-scm.com/downloads/
   ‚Üí Teste: git --version

Ferramentas recomendadas
------------------------
‚Üí VS Code: https://code.visualstudio.com/
‚Üí Android Studio: https://developer.android.com/studio (se quiser testar no Android)

================================================================================
üîß PASSO 1: CONFIGURANDO O BANCO DE DADOS
================================================================================

Primeiro, vamos preparar o PostgreSQL para guardar os dados do projeto.

1Ô∏è‚É£ Abra o terminal do PostgreSQL
---------------------------------
Windows:
  - Abra o menu Iniciar
  - Procure por "SQL Shell (psql)"
  - Abra o programa
  - Pressione Enter nas primeiras perguntas at√© pedir a senha
  - Digite a senha que voc√™ criou na instala√ß√£o

Linux/Mac:
  - Abra o terminal
  - Digite: sudo -u postgres psql
  - Digite sua senha se pedir

2Ô∏è‚É£ Crie o banco de dados
-------------------------
Dentro do psql, digite este comando e pressione Enter:

  CREATE DATABASE weather_db;

Voc√™ deve ver: CREATE DATABASE

Para sair do psql, digite:

  \q

Pronto! O banco est√° criado.

================================================================================
üêç PASSO 2: CONFIGURANDO O BACKEND (API Django)
================================================================================

Agora vamos preparar a API que busca os dados meteorol√≥gicos.

1Ô∏è‚É£ Navegue at√© a pasta do backend
----------------------------------
Abra o terminal na pasta do projeto e digite:

  cd backend

2Ô∏è‚É£ Instale as depend√™ncias Python
----------------------------------
Digite este comando e aguarde (pode demorar alguns minutos):

  poetry install

Voc√™ vai ver v√°rias mensagens de instala√ß√£o de pacotes. Quando terminar,
deve aparecer algo como "Installing the current project: eco-sight".

3Ô∏è‚É£ Configure as vari√°veis de ambiente
--------------------------------------
Crie um arquivo chamado ".env" dentro da pasta backend.

üí° No Windows: clique com bot√£o direito ‚Üí Novo ‚Üí Documento de Texto
   Renomeie para ".env" (apague o .txt)

üí° No VS Code: clique com bot√£o direito na pasta backend ‚Üí New File ‚Üí .env

Cole este conte√∫do no arquivo (ATEN√á√ÉO √†s substitui√ß√µes):

---
# Django
SECRET_KEY=django-insecure-#p6yg_8(6s8s*(5@77$-b)imke6v99lmyge482r+la6v$n3#dd
DEBUG=True

# Banco de Dados PostgreSQL
DB_NAME=weather_db
DB_USER=postgres
DB_PASSWORD=COLOQUE_SUA_SENHA_AQUI
DB_HOST=localhost
DB_PORT=5432

# OpenWeather API Key
OPENWEATHER_API_KEY=2ed3c69579f74102077da7ec7a4c0754
---

‚ö†Ô∏è IMPORTANTE:
  - Troque "COLOQUE_SUA_SENHA_AQUI" pela senha do PostgreSQL
  - A API Key do OpenWeather j√° est√° definida no arquivo acima (use a chave fornecida)

Salve o arquivo!

4Ô∏è‚É£ Prepare o banco de dados
----------------------------
Ainda na pasta backend, rode:

  poetry run python manage.py migrate

Voc√™ vai ver v√°rias mensagens de "Applying...". Quando terminar, ver√° "OK".

5Ô∏è‚É£ Inicie o servidor backend
-----------------------------
Agora √© s√≥ rodar:

  poetry run python manage.py runserver

Voc√™ deve ver:

  Starting development server at http://127.0.0.1:8000/
  Quit the server with CTRL-BREAK.

üéâ Backend rodando! Deixe esse terminal aberto e abra outro para o frontend.

================================================================================
üì± PASSO 3: CONFIGURANDO O FRONTEND (App Flutter)
================================================================================

Agora vamos preparar o aplicativo que voc√™ vai usar para ver os dados.

1Ô∏è‚É£ Abra um NOVO terminal
-------------------------
N√£o feche o terminal do backend! Abra outro terminal.

2Ô∏è‚É£ Navegue at√© a pasta do frontend
-----------------------------------
  cd frontend

(Se voc√™ estava na pasta backend, volte primeiro: cd ..)

3Ô∏è‚É£ Configure as vari√°veis de ambiente
--------------------------------------
Crie um arquivo ".env" dentro da pasta frontend.

Cole este conte√∫do:

---
API_URL=https://api.openweathermap.org/data/2.5
API_KEY=2ed3c69579f74102077da7ec7a4c0754
UNITS=metric
LANG=pt_br
---

Salve o arquivo!

4Ô∏è‚É£ Instale as depend√™ncias Flutter
-----------------------------------
  flutter pub get

Aguarde o download. Quando terminar, deve aparecer: "Got dependencies!"

5Ô∏è‚É£ Verifique os dispositivos dispon√≠veis
-----------------------------------------
  flutter devices

Voc√™ vai ver algo como:

  Chrome (web) ‚Ä¢ chrome ‚Ä¢ web-javascript
  Windows (desktop) ‚Ä¢ windows ‚Ä¢ windows-x64
  [Nome do seu celular] (mobile) ‚Ä¢ ...

Anote o "device ID" que voc√™ quer usar (ex: "chrome", "windows").

6Ô∏è‚É£ Habilite plataformas (se necess√°rio)
-------------------------------------
Se n√£o aparecer "Chrome" ou "Windows", habilite:

  Para Web:     flutter config --enable-web
  Para Windows: flutter config --enable-windows-desktop

7Ô∏è‚É£ Execute o aplicativo
------------------------
Escolha uma das op√ß√µes:

  üåê Para rodar no navegador (mais f√°cil):
    flutter run -d chrome

  ü™ü Para rodar no Windows:
    flutter run -d windows

  ü§ñ Para rodar no Android:
    - Abra um emulador no Android Studio OU conecte seu celular
    - flutter run

A primeira vez pode demorar alguns minutos compilando.

Quando terminar, o app vai abrir automaticamente!

================================================================================
‚ú® USANDO O APLICATIVO
================================================================================

Quando o app abrir:

1. Ele vai pedir permiss√£o para acessar sua localiza√ß√£o ‚Üí ACEITE
2. Aguarde alguns segundos enquanto carrega os dados
3. Voc√™ vai ver 3 abas na parte inferior:
   
   üìä Dashboard: Resumo com temperatura, qualidade do ar e risco de alagamento
   ‚òÅÔ∏è Clima: Detalhes meteorol√≥gicos completos
   üó∫Ô∏è Mapa: Visualiza√ß√£o geogr√°fica com camadas de polui√ß√£o e alagamento

Pronto! O app est√° funcionando. üéâ

Para atualizar os dados, toque no √≠cone de üîÑ refresh no Dashboard.

================================================================================
üåê URLS IMPORTANTES
================================================================================

Backend (API):
  ‚Üí http://localhost:8000/api/           (Endpoints da API)

Frontend:
  ‚Üí O app abre automaticamente no navegador ou emulador

Banco de Dados PostgreSQL:
  ‚Üí Host: localhost
  ‚Üí Porta: 5432
  ‚Üí Database: weather_db
  ‚Üí User: postgres
  ‚Üí Password: (a que voc√™ definiu)

================================================================================
üõë COMO PARAR TUDO
================================================================================

Para parar o backend:
  ‚Üí No terminal do backend, pressione: Ctrl + C

Para parar o frontend:
  ‚Üí No terminal do frontend, pressione: Ctrl + C
  ‚Üí Se o navegador/app n√£o fechar, feche manualmente

Para parar o PostgreSQL:
  ‚Üí Windows: Servi√ßos > postgresql-x64-16 > Parar
  ‚Üí Linux: sudo service postgresql stop
  ‚Üí Mac: brew services stop postgresql

================================================================================
üîÑ COMANDOS R√ÅPIDOS - RESUMO
================================================================================

PRIMEIRA VEZ (Setup completo):

# 1. Configure o banco
psql -U postgres
CREATE DATABASE weather_db;
\q

# 2. Backend
cd backend
poetry install
# Crie o arquivo .env aqui!
poetry run python manage.py migrate
poetry run python manage.py runserver

# 3. Frontend (em outro terminal)
cd frontend
# Crie o arquivo .env aqui!
flutter pub get
flutter run -d chrome

---

DAS PR√ìXIMAS VEZES (j√° configurado):

Terminal 1 (Backend):
  cd backend
  poetry run python manage.py runserver

Terminal 2 (Frontend):
  cd frontend
  flutter run -d chrome

---

Acesse:
  ‚Üí App: Abre automaticamente no navegador
  ‚Üí API: http://localhost:8000/api/
